<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Code screen</title>
    </head>
    <body>
        <main>
            <pre><code>function add() {<br/>    $.post(&quot;add.php&quot;, $(&quot;#add&quot;).serialize(), function(data) { <br/>        writeTask(data.id, data.name, data.description, data.time);<br/>        $(&quot;#name&quot;).val(&quot;&quot;);<br/>        $(&quot;#description&quot;).val(&quot;&quot;) }, &quot;json&quot;);<br/>    return false; <br/>}<br/><br/>function del(id) {<br/>    $.post(&quot;del.php&quot;, $(&quot;#del-&quot; + id).serialize(), function(data) { <br/>        delTask(data.id) }, &quot;json&quot;)<br/>    return false; <br/>}<br/><br/>$(document).ready(function(){ <br/>    $.ajax({     type: &quot;GET&quot;, <br/>        url: &quot;tasks.xml&quot;,      dataType: &quot;xml&quot;,      success: function(xml) {<br/>            writeTasks(xml);<br/>        }<br/>    }) <br/>}) <br/>   <br/>let tasksIdTag = &quot;#tasks&quot;;<br/><br/>function writeTasks(xml) {<br/>    $(tasksIdTag).empty();<br/>    $(xml).find(&quot;task&quot;).each(function() {<br/>        let id = $(this).attr(&quot;id&quot;).toString();<br/>        let name = $(this).find(&quot;name&quot;).first().text();<br/>        let description = $(this).find(&quot;description&quot;).first().text();<br/>        let time = $(this).find(&quot;time&quot;).first().text();<br/>        writeTask(id, name, description, time);<br/>    });<br/>}<br/><br/>function writeTask(id, name, description, time) {<br/>    let $taskElement = $(&quot;&lt;div&gt;&lt;/div&gt;&quot;,<br/>    {class: &quot;task&quot;,<br/>     id: &quot;task&quot;+id});<br/>    let $left = $(&quot;&lt;div&gt;&lt;/div&gt;&quot;,<br/>    {class: &quot;task-left&quot;});<br/>    let $right = $(&quot;&lt;div&gt;&lt;/div&gt;&quot;,<br/>    {class: &quot;task-right&quot;});<br/>    let $nameSpace = $(&quot;&lt;h3&gt;&lt;/h3&gt;&quot;);<br/>    let $descriptionScape = $(&quot;&lt;p&gt;&lt;/p&gt;&quot;);<br/>    let $timeSpace = $(&quot;&lt;h3&gt;&lt;/h3&gt;&quot;);<br/>    let $buttons = $(&quot;&lt;div&gt;&lt;/div&gt;&quot;,<br/>    {class: &quot;task-buttons&quot;});<br/>    let $del = $(&quot;&lt;button&gt;&lt;/button&gt;&quot;,<br/>    {class: &quot;small-btn&quot;});<br/>    $del.append(&quot;Delete&quot;);<br/>    let $delHiddenInput = $(&quot;&lt;input&gt;&lt;/input&gt;&quot;,<br/>    {type: &quot;hidden&quot;, value: id, name: &quot;id&quot;});<br/>    let $delForm = $(&quot;&lt;form&gt;&lt;/form&gt;&quot;,<br/>    {method: &quot;post&quot;, onsubmit: &quot;return del(&quot; + id + &quot;)&quot;, id: &quot;del-&quot;+id});<br/>    $delForm.append($delHiddenInput);<br/>    $delForm.append($del);<br/>    $buttons.append($delForm);<br/>    $nameSpace.append(name);<br/>    $descriptionScape.append(description);<br/>    $timeSpace.append(time);<br/>    $right.append($buttons);<br/>    $right.append($timeSpace);<br/>    $left.append($nameSpace);<br/>    $left.append($descriptionScape);<br/>    $taskElement.append($left);<br/>    $taskElement.append($right);<br/><br/>    let now = new Date();<br/>    let alarmDate = new Date();<br/>    alarmDate.setHours(time.substring(0, 2));<br/>    alarmDate.setMinutes(time.substring(3));<br/>    alarmDate.setSeconds(0);<br/>    alarmDate.setMilliseconds(0);<br/>    if (now &lt;= alarmDate)<br/>    {<br/>        let diff = alarmDate - now;<br/>        setTimeout(() =&gt; alert(name + &quot; | &quot; + time + &quot;\n&quot; + description), diff);<br/>    }<br/><br/>    if ($(tasksIdTag).children().length == 0)<br/>        $(tasksIdTag).append($taskElement);<br/>    else {<br/>        let existingId = findId(time);<br/>        if (existingId != -1)<br/>            $(&quot;#task&quot;+existingId).before($taskElement);<br/>        else<br/>            $(tasksIdTag).append($taskElement);<br/>    }<br/>}<br/><br/>function findId(time) {<br/>    let tasks = $(tasksIdTag).children();<br/>    let id = tasks.eq(0).attr(&quot;id&quot;).substring(4);<br/>    let tempTime;<br/>    for (let i = 0; i &lt; tasks.length; i++) {<br/>        tempTime = tasks.eq(i).find(&quot;.task-right&quot;).find(&quot;h3&quot;).text();<br/>        if (tempTime &gt; time)<br/>        {<br/>            id = tasks.eq(i).attr(&quot;id&quot;).substring(4);<br/>            break;<br/>        }<br/>        else if (i == tasks.length - 1) {<br/>            id = -1;<br/>        }<br/>    }<br/>    return id;<br/>}<br/><br/>function delTask(id) {<br/>    $(&quot;#task&quot; + id).remove();<br/>}</code></pre>
        </main>
    </body>
</html>