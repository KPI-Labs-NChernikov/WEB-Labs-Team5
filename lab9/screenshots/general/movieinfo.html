<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Code screen</title>
    </head>
    <body>
        <main>
            <pre><code>[Route(&quot;{controller}/{id}&quot;)]<br/>        public async Task&lt;IActionResult&gt; Index(int id, string lang)<br/>        {<br/>            AnalyzeLang(lang);<br/>            lang = ViewBag.Lang;<br/>            var movie = await _movieService.GetByIdAsync(id);<br/>            MovieViewModel model;<br/>            if (!(movie is null))<br/>            {<br/>                model = new MovieViewModel()<br/>                {<br/>                    Id = movie.Id,<br/>                    LinkToAffiche = movie.LinkToAffiche.Replace(&#39;\\&#39;, &#39;/&#39;),<br/>                    LinkToPoster = movie.LinkToPoster.Replace(&#39;\\&#39;, &#39;/&#39;),<br/>                    Name = _movieService.GetNameForLang(movie, lang) + &quot; (&quot; + movie.Year + &quot;)&quot;,<br/>                    Description = _movieService.GetDescriptionForLang(movie, lang),<br/>                    AgeRestriction = movie.AgeRestriction + &quot;+&quot;,<br/>                    Rating = movie.Rating,<br/>                    Genre = string.Join(&quot;, &quot;, (await _genreService.GetMovieGenresAsync(movie.Id)).Select(m =&gt; _genreService.GetNameForLang(m, lang))),<br/>                    Actors = string.Join(&quot;, &quot;, (await _actorService.GetMovieActorsAsync(movie.Id)).Select(m =&gt; _actorService.GetFirstNameForLang(m, lang) + &quot; &quot; + _actorService.GetLastNameForLang(m, lang))),<br/>                    Authors = string.Join(&quot;, &quot;, (await _scenarioWriterService.GetMovieScenarioWritersAsync(movie.Id)).Select(m =&gt; _scenarioWriterService.GetFirstNameForLang(m, lang) + &quot; &quot; + _scenarioWriterService.GetLastNameForLang(m, lang))),<br/>                    Director = string.Join(&quot;, &quot;, (await _directorService.GetMovieDirectorsAsync(movie.Id)).Select(m =&gt; _directorService.GetFirstNameForLang(m, lang) + &quot; &quot; + _directorService.GetLastNameForLang(m, lang))),<br/>                    Country = _countryService.GetNameForLang((await _countryService.GetByIdAsync(movie.CountryId)), lang),<br/>                    Length = movie.Length + &quot; &quot;<br/>                };<br/>                model.Length += lang switch<br/>                {<br/>                    &quot;eng&quot; =&gt; &quot;minutes&quot;,<br/>                    &quot;ru&quot; =&gt; &quot;минут&quot;,<br/>                    _ =&gt; &quot;хвилин&quot;,<br/>                };<br/>                var recommended = (await _movieService.GetSimilarAsync(movie.Id))<br/>                .Select(m =&gt; new MovieCarouselViewModel()<br/>                {<br/>                    Id = m.Id,<br/>                    LinkToAffiche = m.LinkToAffiche.Replace(&#39;\\&#39;, &#39;/&#39;),<br/>                    Name = _movieService.GetNameForLang(m, lang)<br/>                });<br/>                model.Recommended = recommended;<br/>            }<br/>            else<br/>            {<br/>                model = null;<br/>                ModelState.AddModelError(&quot;MovieNotFoundError&quot;, &quot;Такого фільму немає в базі&quot;);<br/>            }<br/>            return View(model);<br/>        }</code></pre>
        </main>
    </body>
</html>