<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Code screen</title>
    </head>
    <body>
        <main>
            <pre><code>using Business.Interfaces;<br/>using Data.Entities;<br/>using System;<br/>using System.Collections.Generic;<br/>using System.IO;<br/>using System.Linq;<br/>using System.Threading.Tasks;<br/><br/>namespace Presentation.Data<br/>{<br/>    public class CustomLogger<br/>    {<br/>        private readonly string initialPath = &quot;C:\\Birky\\&quot;;<br/><br/>        private readonly IGenreService _genreService;<br/><br/>        public CustomLogger(IGenreService genreService)<br/>        {<br/>            _genreService = genreService;<br/>        }<br/><br/>        private string GetTimeString(DateTime time)<br/>        {<br/>            return $&quot;{time.Year}-{time.Month}-{time.Day}-{time.ToShortTimeString()}-{time.Ticks}&quot;;<br/>        }<br/><br/>        private string GetDateString(DateTime time)<br/>        {<br/>            return $&quot;{time.Year}-{time.Month}-{time.Day}&quot;;<br/>        }<br/><br/>        private string GetPath(string date) =&gt; initialPath + date + &quot;.txt&quot;;<br/><br/>        public async Task LoginUserAsync(User user)<br/>        {<br/>            var time = DateTime.Now;<br/>            var timeString = GetTimeString(time);<br/>            string path = GetPath(GetDateString(time));<br/>            string text = timeString + &quot; User &quot; + user.Email + &quot; has just logged in&quot; + &quot;\n&quot;;<br/>            if (!File.Exists(path))<br/>            {<br/>                using StreamWriter sw = File.CreateText(path);<br/>                await sw.WriteAsync(text);<br/>            }<br/>            else<br/>            {using StreamWriter sw = File.AppendText(path);<br/>                await sw.WriteAsync(text);<br/>            }<br/>        }<br/><br/>        public async Task RegisterUserAsync(User user)<br/>        {<br/>            var time = DateTime.Now;<br/>            var timeString = GetTimeString(time);<br/>            string path = GetPath(GetDateString(time));<br/>            string text = timeString + &quot; User &quot; + user.Email + &quot; has just registered&quot; + &quot;\n&quot;;<br/>            text += &quot;Information: \n&quot;;<br/>            text += &quot;Name: &quot; + user.FirstName + &quot; &quot; + user.LastName + &quot;\n&quot;;<br/>            var phoneNumber = (user.PhoneNumber is null) ? &quot;Не вказано&quot; : user.PhoneNumber;<br/>            text += &quot;Phone number: &quot; + phoneNumber + &quot;\n&quot;;<br/>            text += &quot;Fav genres: &quot; + string.Join(&quot;, &quot;, (await _genreService.GetUserGenresAsync(user.Id)).Select(g =&gt; g.Name)) + &quot;\n&quot;;<br/>            if (!File.Exists(path))<br/>            {using StreamWriter sw = File.CreateText(path);<br/>                await sw.WriteAsync(text);<br/>            }<br/>            else<br/>            {using StreamWriter sw = File.AppendText(path);<br/>                await sw.WriteAsync(text);<br/>            }<br/>        }<br/><br/>        public async Task LogoutUserAsync(User user)<br/>        {<br/>            var time = DateTime.Now;<br/>            var timeString = GetTimeString(time);<br/>            string path = GetPath(GetDateString(time));<br/>            string text = timeString + &quot; User &quot; + user.Email + &quot; has just logged out&quot; + &quot;\n&quot;;<br/>            if (!File.Exists(path))<br/>            {using StreamWriter sw = File.CreateText(path);<br/>                await sw.WriteAsync(text);<br/>            }<br/>            else<br/>            {<br/>                using StreamWriter sw = File.AppendText(path);<br/>                await sw.WriteAsync(text);<br/>            }<br/>        }<br/>    }<br/>}<br/></code></pre>
        </main>
    </body>
</html>