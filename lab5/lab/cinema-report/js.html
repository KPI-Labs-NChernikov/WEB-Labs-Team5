<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Cinema JS Code screen</title>
    </head>
    <body>
        <main>
            <pre><code>&#39;use strict&#39;;<br/><br/>let $posters = $(&quot;.poster&quot;);<br/>let $postersSlider = $(&#39;.posters&#39;);<br/>let currentPosterNumber = 0;<br/>let posterLock = false;<br/><br/>function getPrevPosterNumber() {<br/>    return currentPosterNumber &lt; 1 ? $posters.length - 1 : currentPosterNumber - 1;<br/>}<br/><br/>function getNextPosterNumber() {<br/>    return currentPosterNumber &gt; $posters.length - 2 ? 0 : currentPosterNumber + 1;<br/>}<br/><br/>function scrollPosterRight() {<br/>    if (posterLock)<br/>        return;<br/>    posterLock = true;<br/>    let animationSpeed = 1000;  <br/>    if (currentPosterNumber == $posters.length - 1)  <br/>    {<br/>        let $clone = $posters.eq(0).clone();<br/>        $clone.appendTo($postersSlider);<br/>        $clone.addClass(&#39;active&#39;);<br/>        $postersSlider.animate({&#39;margin-left&#39;: &#39;-=100vw&#39;}, animationSpeed, function() {<br/>            $postersSlider.css({&#39;margin-left&#39;: &#39;0&#39;});<br/>            $posters.eq(currentPosterNumber).removeClass(&#39;active&#39;);<br/>            $posters.eq(getNextPosterNumber()).addClass(&#39;active&#39;);<br/>            $clone.removeClass(&#39;active&#39;);<br/>            $clone.remove();<br/>            currentPosterNumber = getNextPosterNumber();<br/>            posterLock = false;<br/>        });<br/>    }<br/>    else {<br/>        $posters.eq(getNextPosterNumber()).addClass(&#39;active&#39;);<br/>        $postersSlider.animate({&#39;margin-left&#39;: &#39;-=100vw&#39;}, animationSpeed, function() {<br/>            $postersSlider.css({&#39;margin-left&#39;: &#39;0&#39;});<br/>            $posters.eq(currentPosterNumber).removeClass(&#39;active&#39;);<br/>            currentPosterNumber = getNextPosterNumber();<br/>            posterLock = false;<br/>        });<br/>    }<br/>}<br/><br/>function scrollPosterLeft() {<br/>    if (posterLock)<br/>        return;<br/>    posterLock = true;<br/>    let animationSpeed = 1000; <br/>    if (currentPosterNumber == 0)   <br/>    {<br/>        let $clone = $posters.eq($posters.length - 1).clone();<br/>        $clone.prependTo($postersSlider);<br/>        $clone.addClass(&#39;active&#39;);<br/>        $postersSlider.css({&#39;margin-left&#39;: &#39;-=100vw&#39;});<br/>        $postersSlider.animate({&#39;margin-left&#39;: &#39;+=100vw&#39;}, animationSpeed, function() {<br/>            $postersSlider.css({&#39;margin-left&#39;: &#39;0&#39;});<br/>            $posters.eq(currentPosterNumber).removeClass(&#39;active&#39;);<br/>            $posters.eq(getPrevPosterNumber()).addClass(&#39;active&#39;);<br/>            $clone.removeClass(&#39;active&#39;);<br/>            $clone.remove();<br/>            currentPosterNumber = getPrevPosterNumber();<br/>            posterLock = false;<br/>        });<br/>    }<br/>    else<br/>    {<br/>        $posters.eq(getPrevPosterNumber()).addClass(&#39;active&#39;);<br/>        $postersSlider.css({&#39;margin-left&#39;: &#39;-=100vw&#39;});<br/>        $postersSlider.animate({&#39;margin-left&#39;: &#39;+=100vw&#39;}, animationSpeed, function() {<br/>            $postersSlider.css({&#39;margin-left&#39;: &#39;0&#39;});<br/>            $posters.eq(currentPosterNumber).removeClass(&#39;active&#39;);<br/>            currentPosterNumber = getPrevPosterNumber();<br/>            posterLock = false;<br/>        });<br/>    }<br/>}<br/><br/>function isMoreThanAHalfOfPosterInViewport() {<br/>    const rect = $postersSlider.get(0).getBoundingClientRect();<br/>    const windowHeight = (window.innerHeight || document.documentElement.clientHeight);<br/>    let isInViewport = (rect.bottom &gt; windowHeight / 2);<br/>    return isInViewport;<br/>}<br/><br/>function changePosterOnInterval() {<br/>    const delay = 20000;<br/>    var timerId = setInterval(function() {<br/>        if (isMoreThanAHalfOfPosterInViewport())<br/>            scrollPosterRight();     <br/>    }, delay);<br/>}<br/><br/>let lastSegmentsNumber;<br/>let carouselGapSize = 4;<br/><br/>let $newMoviesSlider = $(&#39;#carousel-1&#39;);<br/>let $newMovies = $(&#39;#carousel-1 .filmBlock&#39;);<br/>let currentNewMovieNumber = 0;<br/>let newMovieLock = false;<br/>let $newMoviesArrowLeft = $(&#39;#triangleLeft2&#39;);<br/>let $newMoviesArrowRight = $(&#39;#triangleRight2&#39;);<br/>let newMoviesCarousel = {slider: $newMoviesSlider, elements: $newMovies, arrowLeft: $newMoviesArrowLeft, <br/>    arrowRight: $newMoviesArrowRight, current: currentNewMovieNumber, lock: newMovieLock};<br/><br/>let $shortsSlider = $(&#39;#carousel-2&#39;);<br/>let $shorts = $(&#39;#carousel-2 .filmBlock&#39;);<br/>let currentShortNumber = 0;<br/>let shortLock = false;<br/>let $shortsArrowLeft = $(&#39;#triangleLeft3&#39;);<br/>let $shortsArrowRight = $(&#39;#triangleRight3&#39;);<br/>let shortsCarousel = {slider: $shortsSlider, elements: $shorts, arrowLeft: $shortsArrowLeft,<br/>     arrowRight: $shortsArrowRight, current: currentShortNumber, lock: shortLock};<br/><br/>let carousels = [newMoviesCarousel, shortsCarousel];<br/><br/>var isPhone = window.matchMedia(&quot;(max-width: 650px)&quot;);<br/>var isTablet = window.matchMedia(&quot;(max-width: 1200px)&quot;);<br/>var isNotWide = window.matchMedia(&quot;(max-width: 1400px)&quot;);<br/>var isUltrawide = window.matchMedia(&quot;(min-width: 1801px)&quot;);<br/><br/>function getCarouselSegmentsNumber() {<br/>    let number = 6;<br/>    if (isPhone.matches)<br/>        number = 1;<br/>    else if (isTablet.matches)<br/>        number = 3;<br/>    else if (isNotWide.matches)<br/>        number = 5;<br/>    else if (isUltrawide.matches)<br/>        number = 8;<br/>    return number;<br/>}<br/><br/>function changeCarousels(carousels) {<br/>    if (lastSegmentsNumber != getCarouselSegmentsNumber())<br/>    {<br/>        lastSegmentsNumber = getCarouselSegmentsNumber();<br/>        for (let carousel of carousels)<br/>        {<br/>            carousel.arrowRight.removeClass(&#39;disabled&#39;);<br/>            carousel.current = 0;<br/>            carousel.arrowLeft.addClass(&#39;disabled&#39;);<br/>            if (carousel.elements.length &lt;= lastSegmentsNumber)<br/>            {<br/>                carousel.slider.css({&#39;justify-content&#39; : &#39;center&#39;});<br/>                carousel.arrowRight.addClass(&#39;disabled&#39;);<br/>            }<br/>            else <br/>            {<br/>                carousel.slider.css({&#39;justify-content&#39; : &#39;start&#39;});<br/>            }<br/>            carousel.slider.css({&#39;margin-left&#39; : &#39;0&#39;});<br/>        }<br/>    }<br/>}<br/><br/>function getPrevCarouselNumber(current, length) {<br/>    return current &lt; 1 ? length - 1 : current - 1;<br/>}<br/><br/>function scrollCarouselRight(carousel) {<br/>    if (carousel.lock)<br/>        return;<br/>    else if (carousel.current + getCarouselSegmentsNumber() &gt; carousel.elements.length - 1)<br/>        return;<br/>    carousel.lock = true;<br/>    if (carousel.current == 0)<br/>        carousel.arrowLeft.removeClass(&#39;disabled&#39;);<br/>    if (carousel.current + getCarouselSegmentsNumber() == carousel.elements.length - 1)<br/>        carousel.arrowRight.addClass(&#39;disabled&#39;);<br/>    let animationSpeed = 1000;  <br/>    carousel.slider.animate({&#39;margin-left&#39;: &#39;-=&#39; + (carousel.elements.eq(carousel.current).width() + carouselGapSize) + &#39;px&#39;}, animationSpeed, function() {<br/>        carousel.current++;<br/>        carousel.lock = false;<br/>    });<br/>}<br/><br/>function scrollCarouselLeft(carousel) {<br/>    if (carousel.lock)<br/>        return;<br/>    else if (carousel.current &lt; 1)<br/>        return;<br/>    carousel.lock = true;<br/>    if (carousel.current + getCarouselSegmentsNumber() == carousel.elements.length)<br/>        carousel.arrowRight.removeClass(&#39;disabled&#39;);<br/>    if (carousel.current == 1)<br/>        carousel.arrowLeft.addClass(&#39;disabled&#39;);<br/>    let animationSpeed = 1000;  <br/>    carousel.slider.animate({&#39;margin-left&#39;: &#39;+=&#39; + (carousel.elements.eq(carousel.current).width() + carouselGapSize) + &#39;px&#39;}, animationSpeed, function() {<br/>        carousel.current--;<br/>        carousel.lock = false;<br/>    });<br/>}<br/><br/>$(function() {<br/>    changePosterOnInterval();<br/>    window.addEventListener(&#39;resize&#39;, () =&gt; {changeCarousels(carousels);});<br/>    window.addEventListener(&quot;orientationchange&quot;,  () =&gt; {changeCarousels(carousels);});<br/>    changeCarousels(carousels);<br/>    for (let carousel of carousels)<br/>    {<br/>        carousel.arrowLeft.click(() =&gt; {scrollCarouselLeft(carousel);});<br/>        carousel.arrowRight.click(() =&gt; {scrollCarouselRight(carousel);});<br/>    };<br/>});<br/></code></pre>
        </main>
    </body>
</html>