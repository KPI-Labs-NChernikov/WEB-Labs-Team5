<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Code screen</title>
    </head>
    <body>
        <main>
            <pre><code>&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>    &lt;head&gt;<br/>        &lt;meta charset=&quot;utf-8&quot;&gt;<br/>        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;<br/>        &lt;title&gt;All audio books&lt;/title&gt;<br/>        &lt;link rel=&quot;stylesheet&quot; href=&quot;font-awesome-4.7.0/css/font-awesome.min.css&quot;&gt;<br/>        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;<br/>        &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com&quot;&gt;<br/>        &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; crossorigin&gt;<br/>        &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt; <br/>    &lt;/head&gt;<br/>    &lt;body&gt;<br/>        &lt;header&gt;<br/>        &lt;h1&gt;&lt;a href=&quot;index.php&quot;&gt;AudioBooks&lt;/a&gt;&lt;/h1&gt;<br/>            &lt;div class=&quot;search-wrapper&quot;&gt;<br/>            &lt;form method=&quot;get&quot; action=&quot;find-book.php&quot;&gt;<br/>   &lt;div class=&quot;search&quot;&gt;<br/>      &lt;input type=&quot;text&quot; class=&quot;searchTerm&quot; name=&quot;search&quot; placeholder=&quot;Введіть назву книги або автора&quot;&gt;<br/>      &lt;button type=&quot;submit&quot; class=&quot;searchButton&quot;&gt;<br/>        <br/>        &lt;i class=&quot;fa fa-search&quot;&gt;&lt;/i&gt;<br/>     &lt;/button&gt;<br/>     &lt;/form&gt;<br/>   &lt;/div&gt;<br/>   <br/>&lt;/div&gt;<br/>        &lt;/header&gt;<br/>        &lt;main&gt;<br/>            &lt;div class=&quot;books&quot;&gt;<br/>            &lt;?php<br/>            $connect = new mysqli(&quot;lab7&quot;, &quot;root&quot;, &quot;&quot;);<br/>            if($connect-&gt;connect_error){<br/>                die(&quot;Error occured: &quot; . $connect-&gt;connect_error);<br/>            }<br/>            $connect-&gt;select_db(&quot;audiolibrary&quot;);<br/>            $sql = &quot;SELECT * FROM audiobook ORDER BY id DESC&quot;;<br/>            if($result = $connect-&gt;query($sql)){<br/>                foreach($result as $row){<br/>                    echo &quot;&lt;div class=\&quot;book-short\&quot;&gt;&quot;;<br/>                    $bookId = $row[&quot;id&quot;];<br/>                    echo &quot;&lt;h2&gt;&lt;a href=book.php?id=$bookId&gt;&quot; . $row[&quot;name&quot;] . &quot;&lt;/a&gt;&lt;/h2&gt;&quot;;<br/>                    $sqlAuthors = &quot;SELECT * FROM author_audiobook WHERE audiobook_id = $bookId&quot;;<br/>                    if ($authors =  $connect-&gt;query($sqlAuthors))<br/>                    {<br/>                        $authorsCount = 0;<br/>                        $authorsString = &quot;&quot;;<br/>                        foreach($authors as $author){<br/>                            $sqlAuthorName = &quot;SELECT * FROM author WHERE id = &quot; . $author[&quot;author_id&quot;];<br/>                            if ($authorName =  $connect-&gt;query($sqlAuthorName))<br/>                            {<br/>                                $fetched = $authorName-&gt;fetch_row();<br/>                                $authorsString = $authorsString.$fetched[1].&quot; &quot;.$fetched[2].&quot;, &quot;;<br/>                            }<br/>                            $authorsCount++;<br/>                            $authorName-&gt;free();<br/>                        }<br/>                        if ($authorsCount &gt; 1)<br/>                            echo &quot;&lt;p&gt; Автори: &quot;;<br/>                        else<br/>                            echo &quot;&lt;p&gt; Автор: &quot;;<br/>                        echo substr($authorsString, 0, -2) . &quot;&lt;/p&gt;&quot;;<br/>                        $authors-&gt;free();<br/>                    }<br/>                    <br/>                    $sqlSpeakers = &quot;SELECT * FROM speaker_audiobook WHERE audiobook_id = $bookId&quot;;<br/>                    if ($speakers =  $connect-&gt;query($sqlSpeakers))<br/>                    {<br/>                        $speakersString = &quot;&quot;;<br/>                        foreach($speakers as $speaker){<br/>                            $sqlSpeakerName = &quot;SELECT * FROM speaker WHERE id = &quot; . $speaker[&quot;speaker_id&quot;];<br/>                            if ($speakerName =  $connect-&gt;query($sqlSpeakerName))<br/>                            {<br/>                                $fetched = $speakerName-&gt;fetch_row();<br/>                                $speakersString = $speakersString.$fetched[1].&quot; &quot;.$fetched[2].&quot;, &quot;;<br/>                                $speakerName-&gt;free();<br/>                            }<br/>                        }<br/>                        echo &quot;&lt;p&gt; Озвучка: &quot;. substr($speakersString, 0, -2) . &quot;&lt;/p&gt;&quot;;<br/>                        $speakers-&gt;free();<br/>                    }<br/>                    <br/>                    $sqlGenres = &quot;SELECT * FROM genre_audiobook WHERE audiobook_id = $bookId&quot;;<br/>                    if ($genres =  $connect-&gt;query($sqlGenres))<br/>                    {<br/>                        $genresString = &quot;&quot;;<br/>                        foreach($genres as $genre){<br/>                            $sqlGenreName = &quot;SELECT * FROM genre WHERE id = &quot; . $genre[&quot;genre_id&quot;];<br/>                            if ($genreName =  $connect-&gt;query($sqlGenreName))<br/>                            {<br/>                                $fetched = $genreName-&gt;fetch_row();<br/>                                $genresString = $genresString.$fetched[1].&quot; &quot;.$fetched[2].&quot;, &quot;;<br/>                                $genreName-&gt;free();<br/>                            }<br/>                        }<br/>                        echo &quot;&lt;p&gt; Жанр: &quot;. substr($genresString, 0, -2) . &quot;&lt;/p&gt;&quot;;<br/>                        $genres-&gt;free();<br/>                    }<br/>                    <br/>                    echo &quot;&lt;br&gt;&lt;p&gt;&quot; . mb_substr($row[&quot;description&quot;], 0, 297) . &quot;...&lt;/p&gt;&quot;;<br/>                    echo &quot;&lt;/div&gt;&quot;;<br/>                }<br/>                $result-&gt;free();<br/>            }<br/>            else {<br/>                echo &quot;Error occured: &quot; . $connect-&gt;error;<br/>            }<br/>            $connect-&gt;close();<br/>            ?&gt;<br/>            &lt;/div&gt;<br/>        &lt;/main&gt;<br/>        &lt;footer&gt;<br/>            &lt;p&gt;2021-20XX All right reserved&lt;/p&gt;<br/>            &lt;p&gt;&lt;em&gt;Nikita Chernikov, IS-02&lt;/em&gt;&lt;/p&gt;<br/>        &lt;/footer&gt;<br/>        <br/>    &lt;/body&gt;<br/>&lt;/html&gt;</code></pre>
        </main>
    </body>
</html>